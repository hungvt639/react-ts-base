{"version":3,"sources":["img/en.png","components/header/index.tsx","img/vi.png","components/notify/index.tsx","router/hooks/useNotification.ts","router/PrivateRouter.tsx","utils/mqtt.ts"],"names":["Header","dispatch","useDispatch","user","useSelector","state","userState","useTranslation","t","i18n","menu","to","USER_PROFILE","_id","onClick","clearUser","localStorage","removeItem","className","HOME","NEW_BLOG","LIST_BLOG","lg","language","changeLanguage","width","alt","src","ENImg","overlay","placement","fullname","NotifyMessage","props","message","time","classChill","useEffect","setShow","timer","setTimeout","clearTimeout","useState","show","showNotify","child","document","createElement","e","getElementById","ReactDOM","render","appendChild","mess","id","body","notify","error","success","m","href","MESSAGE","chat","from","content","useNotification","pathname","client","mqttClient","s","listTopics","useMemo","TOPIC_MESSAGE","subscribe","console","log","unsubscribe","notifyMQTT","useCallback","on","topic","a","startsWith","JSON","parse","toString","Profile","React","lazy","NewBlog","Home","ListBlog","BlogView","Chat","PrivateRouter","location","exact","path","USER_PROFILE_ROUTER","component","WaitingComponent","BLOG_VIEW","MESSAGE_ROUTER","mqtt","MQTT","clean","connectTimeout","reconnectPeriod"],"mappings":"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","file":"static/js/9.b885be98.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/en.5ea5551f.png\";","import React from \"react\";\r\nimport \"./header.scss\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { clearUser } from \"../../store/actions/userAction\";\r\nimport { Dropdown } from \"antd\";\r\nimport { AppState } from \"../../interface/redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { HOME, LIST_BLOG, NEW_BLOG, USER_PROFILE } from \"../../router/const\";\r\nimport VIImg from \"../../img/vi.png\";\r\nimport ENImg from \"../../img/en.png\";\r\n\r\nconst Header = () => {\r\n    const dispatch = useDispatch();\r\n    const user = useSelector((state: AppState) => state.userState.user);\r\n    const { t, i18n } = useTranslation();\r\n\r\n    function onLangChange() {\r\n        let lg = \"\";\r\n        if (i18n.language === \"vi\") {\r\n            lg = \"en\";\r\n        } else {\r\n            lg = \"vi\";\r\n        }\r\n        i18n.changeLanguage(lg);\r\n    }\r\n    function logout() {\r\n        dispatch(clearUser());\r\n        localStorage.removeItem(\"token\");\r\n        // localStorage.removeItem(\"user\");\r\n    }\r\n    const menu = (\r\n        <div>\r\n            <div>\r\n                <Link to={`${USER_PROFILE}/${user?._id}`}>Profile</Link>\r\n            </div>\r\n            <div onClick={logout}>{t(\"Logout\")}</div>\r\n        </div>\r\n    );\r\n    return (\r\n        <div className=\"header\">\r\n            <div className=\"max-width1200 headers margin-0auto\">\r\n                <div className=\"width-100 height-100\">\r\n                    <Link className=\"m-5 text-white\" to={HOME}>\r\n                        Home\r\n                    </Link>\r\n                    <Link className=\"m-5 text-white\" to={NEW_BLOG}>\r\n                        NEW_BLOG\r\n                    </Link>\r\n                    <Link className=\"m-5 text-white\" to={LIST_BLOG}>\r\n                        LIST_BLOG\r\n                    </Link>\r\n                </div>\r\n                <div className=\"align-items-center\">\r\n                    <div className=\"btn-header\" onClick={onLangChange}>\r\n                        <img\r\n                            className=\"img-language\"\r\n                            width=\"24px\"\r\n                            alt=\"language\"\r\n                            src={i18n.language === \"vi\" ? VIImg : ENImg}\r\n                        />\r\n                        {t(\"L\")}\r\n                    </div>\r\n                    <Dropdown overlay={menu} placement=\"bottomRight\">\r\n                        <div className=\"btn-header\">{`${user?.fullname} `}</div>\r\n                    </Dropdown>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nexport default Header;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAKrCAMAAABYyA+mAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAADAFBMVEXaJR3bKxzlZRTlZBXxrAvxqwvbKB387gL87wLkYBX//wDkXxXwpwzwpgzaJx376gP86wPaKB3jWxbjWhbvogzvoQ3aJh375gP76APiVhfiVRfunQ3unA364gT65AThUBfhTxftlw7tlg753QX53wTgSxjgShjskg/skQ/42QX42AXfRRngRhnsjA/rjA/40wb30wbfQBn//gDfQhnrhxDrhhD3zgb3zQfePBr//QDePRrqghHqgRH2yQf2yAfdNhv+/AD//ADdOBrpfBHpexL1wwj1wgjcMxv++gH++wHdNBvodxLodhL0vgn0vQncMBz++AH++QHcMRvnchPncRPzuQnzuAnbLhz99gH+9gHcLhzmbRPmbBTytAryswr98wL99AHbLBzlZxTlZhTxrgvxrQvbKRz88AL98QLbKhzkYhXkYRXwqQvwqAz87ALjXRbjXBbvpAzvowz76QP86gPjVxbiVxbvng3ung364wTiURfhURfumA7tmA753gT63wThTBjhSxjtkw7tkg752gX52QXgRRngRxjsjg/sjQ/41Qb41AbfQRnfQxnriRDriBD30Ab3zwbePhrqhBDqgxD2ywf2ygfdORreOhrpfhHpfRH1xQj1xAjdNRvoeRLoeBL0wAj0vwncMhvcNBvndBPncxPzuwnzugn+9wHmbxPmbhPztQrytQr99QHbLRzlaRTlaBTyrwvxrwv98ALlYxXkYxXxqgvwqgv87QLkXhXkXRXwpQzwpAzjWRbjWBbvoA3vnw375QP75wPiUxfiUhfumg3umQ764QThThjhTRjtlQ7tlA753AXgSRjgSBjskA/sjw/41wX41gXfRBnriw/rihD30gb30QbePxrqhhDqhRD2zQf2zAfdOhreOxrpgBHpfxH1xwj1xgjdNxvpehLoehL1wQj0wQjodRLndRL0vAn0uwncLxzncBPnbxPztwrztgrmahTmaRTysQrysAr98gLiVBfumw352wX2xwf64ATePxnmaxTqgBHysgr///9y7SflAAAAAWJLR0T/pQfyxQAAAAd0SU1FB+EICgId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\"","import React, { useState, useEffect } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { MessMQTTInterface } from \"../../interface\";\r\nimport { MESSAGE } from \"../../router/const\";\r\nimport \"./style.scss\";\r\ntype NotifiMessageProps = {\r\n    message: string | JSX.Element;\r\n    time: number;\r\n    classChill: string;\r\n};\r\nconst NotifyMessage = (props: NotifiMessageProps) => {\r\n    const { message, time, classChill } = props;\r\n    useEffect(() => {\r\n        setShow(true);\r\n        let timer = setTimeout(() => setShow(false), time);\r\n        return () => {\r\n            clearTimeout(timer);\r\n        };\r\n    }, [message, time]);\r\n    const [show, setShow] = useState<boolean>(true);\r\n    // if (show) {\r\n    //     return <div className={`show-notify ${classChill}`}>{message}</div>;\r\n    // } else {\r\n    //     return <Fragment />;\r\n    // }\r\n\r\n    return (\r\n        <div className={show ? `show-notify ${classChill}` : \"not-show-notify\"}>\r\n            <div className=\"notify\">{message}</div>\r\n            <div onClick={() => setShow(false)} className=\"close-btn\">\r\n                X\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nfunction showNotify(\r\n    message: string | JSX.Element,\r\n    time: number,\r\n    classChill: string = \"\"\r\n) {\r\n    const child = document.createElement(\"DIV\");\r\n    child.className = \"notify\";\r\n\r\n    const e = document.getElementById(\"__notify\");\r\n    if (e) {\r\n        ReactDOM.render(\r\n            <NotifyMessage\r\n                message={message}\r\n                time={time}\r\n                classChill={classChill}\r\n            />,\r\n            e.appendChild(child)\r\n        );\r\n    } else {\r\n        const mess = document.createElement(\"DIV\");\r\n        mess.id = \"__notify\";\r\n        ReactDOM.render(\r\n            <NotifyMessage\r\n                message={message}\r\n                time={time}\r\n                classChill={classChill}\r\n            />,\r\n            document.body.appendChild(mess)\r\n        );\r\n    }\r\n}\r\n\r\nfunction error(message: string, time: number = 5000) {\r\n    showNotify(message, time, \"error\");\r\n}\r\nfunction success(message: string, time: number = 5000) {\r\n    showNotify(message, time, \"success\");\r\n}\r\n\r\nfunction message(message: MessMQTTInterface, time: number = 5000) {\r\n    const m = (\r\n        <a href={`${MESSAGE}/${message.chat}`}>\r\n            <h2>{message.from}</h2>\r\n            <h3>{message.to}</h3>\r\n            <p>{message.m.content}</p>\r\n        </a>\r\n    );\r\n    showNotify(m, time, \"success\");\r\n}\r\nconst notify = {\r\n    error,\r\n    success,\r\n    message,\r\n};\r\nexport default notify;\r\n","import { useCallback, useEffect, useMemo } from \"react\";\r\nimport { MessMQTTInterface } from \"../../interface\";\r\nimport { MESSAGE } from \"../const\";\r\nimport notify from \"../../components/notify\";\r\nimport mqttClient, { TOPIC_MESSAGE } from \"../../utils/mqtt\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { AppState } from \"../../interface/redux\";\r\n\r\nconst useNotification = (pathname: string) => {\r\n    const client = mqttClient();\r\n    const user = useSelector((s: AppState) => s.userState.user);\r\n    const listTopics = useMemo(() => {\r\n        return [`${TOPIC_MESSAGE}/${user?._id}`];\r\n    }, [user?._id]);\r\n\r\n    useEffect(() => {\r\n        client.subscribe([`${TOPIC_MESSAGE}/${user?._id}`], (error: any) => {\r\n            if (error) {\r\n                console.log(\"Subscribe to topics error\", error);\r\n                return;\r\n            }\r\n        });\r\n        return () => {\r\n            client.unsubscribe(listTopics);\r\n        };\r\n    }, [client, listTopics, user?._id]);\r\n\r\n    const notifyMQTT = useCallback(() => {\r\n        client.on(\"message\", async function (topic: any, mess: any) {\r\n            if (!pathname.startsWith(MESSAGE)) {\r\n                const m: MessMQTTInterface = JSON.parse(mess.toString());\r\n                notify.message(m);\r\n            }\r\n        });\r\n    }, [client, pathname]);\r\n\r\n    useEffect(() => {\r\n        notifyMQTT();\r\n    }, [notifyMQTT]);\r\n\r\n    return;\r\n};\r\nexport default useNotification;\r\n","import React from \"react\";\r\nimport Header from \"../components/header\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport { WaitingComponent } from \".\";\r\nimport {\r\n    HOME,\r\n    NEW_BLOG,\r\n    LIST_BLOG,\r\n    BLOG_VIEW,\r\n    USER_PROFILE_ROUTER,\r\n    MESSAGE_ROUTER,\r\n} from \"./const\";\r\nimport useNotification from \"./hooks/useNotification\";\r\n\r\nconst Profile = React.lazy(() => import(\"../screens/profile\"));\r\nconst NewBlog = React.lazy(() => import(\"../screens/new_blog\"));\r\nconst Home = React.lazy(() => import(\"../screens/home\"));\r\nconst ListBlog = React.lazy(() => import(\"../screens/list-blog\"));\r\nconst BlogView = React.lazy(() => import(\"../screens/blog-view\"));\r\nconst Chat = React.lazy(() => import(\"../screens/chat\"));\r\n\r\nconst PrivateRouter = (props: any) => {\r\n    const pathname = props.location.pathname;\r\n\r\n    useNotification(pathname);\r\n    return (\r\n        <>\r\n            <Header />\r\n            <div className=\"content\">\r\n                <Switch>\r\n                    <Route\r\n                        exact\r\n                        path={USER_PROFILE_ROUTER}\r\n                        component={WaitingComponent(Profile)}\r\n                    />\r\n                    <Route\r\n                        exact\r\n                        path={NEW_BLOG}\r\n                        component={WaitingComponent(NewBlog)}\r\n                    />\r\n                    <Route\r\n                        exact\r\n                        path={LIST_BLOG}\r\n                        component={WaitingComponent(ListBlog)}\r\n                    />\r\n                    <Route\r\n                        exact\r\n                        path={BLOG_VIEW}\r\n                        component={WaitingComponent(BlogView)}\r\n                    />\r\n                    <Route\r\n                        exact\r\n                        path={MESSAGE_ROUTER}\r\n                        component={WaitingComponent(Chat)}\r\n                    />\r\n                    <Route path={HOME} component={WaitingComponent(Home)} />\r\n                </Switch>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default PrivateRouter;\r\n","import * as mqtt from \"mqtt\";\r\nimport { MQTT } from \"../config\";\r\nexport const TOPIC_MESSAGE = \"message\";\r\n\r\nfunction mqttClient() {\r\n    return mqtt.connect(MQTT, {\r\n        clean: true,\r\n        connectTimeout: 4000,\r\n        reconnectPeriod: 1000,\r\n    });\r\n}\r\n// const mqttClient = {};\r\nexport default mqttClient;\r\n"],"sourceRoot":""}